{% extends "employee_layout.html" %}
{% block content %}

<div class="jumbotron">
  <h1> Repair Bike </h1>
</div>

<form method="POST">
  {{form.hidden_tag()}}
  {{form.bike_number.label}} {{form.bike_number}}<br>
  {{form.level_of_repair.label}} {{form.level_of_repair}}<br>
  {{form.comment.label}} {{form.comment}}<br>
  {{form.submit}}
</form>


<div class="jumbotron">
  <h2> Repairs </h2>
</div>

<div class="container">
  <div>
    <table class="table">
      <thead>
        <tr>
          <th scope="col">Date</th>
          <th scope="col">Bike Number</th>
          <th scope="col">Urgency</th>
          <th scope="col">Description</th>
          <th scope="col">User</th>
        </tr>
      </thead>
      <tbody>
        {% for repair in repairs.items %}
        <tr>
          <td scope="row">{{repair.created_at.strftime('%d-%m-%Y')}}</td>
          <td>{{repair.bike_number}}</td>
          <td>{{repair.urgency.name}}</td>
          <td>{{repair.description}}</td>
          <td><a href="{{ url_for('users.user_info', user_id=repair.user_id) }}">
            {{repair.user.first_name.capitalize()}} {{repair.user.last_name.capitalize()}}</a></td>
        </tr>
        {% endfor %}
      </tbody>
      </table>

      <nav aria-label="Page navigation example">
       <ul class="pagination justify-content-center">
         {% for page_num in repairs.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=2) %}
            {% if repairs.page == page_num %}
            <li class="page-item disabled">
              <a class="page-link" href="{{ url_for('employees.repair_bike', page=page_num) }}">{{ page_num }}</a></li>
            </li>
            {% else %}
              <li class="page-item"><a class="page-link" href="{{ url_for('employees.repair_bike', page=page_num) }}">{{ page_num }}</a></li>
            {% endif %}
        {% endfor %}
      </nav>

    </div>
</div>

{% endblock %}
